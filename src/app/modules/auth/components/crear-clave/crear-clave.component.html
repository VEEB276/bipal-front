<!-- @if () {} if pendiente para que aparezca cuando el input esta siendo tocado -->
<mat-card class="mat-card-edited" appearance="outlined">

   <form [formGroup]="codeForm" class="key-form">
      <h2>Crear contraseña</h2>
      
   <!-- Lista de validaciones -->
   <div class="password-requirements">
      <p class="requirements-title">La contraseña debe cumplir:</p>
      <ul>
        <li [class.valid]="hasMinLength">
          <mat-icon>{{ hasMinLength ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          Al menos 6 caracteres
        </li>
        <li [class.valid]="hasUpperCase">
          <mat-icon>{{ hasUpperCase ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          Al menos una mayúscula
        </li>
        <li [class.valid]="hasNumber">
          <mat-icon>{{ hasNumber ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          Al menos un número
        </li>
        <li [class.valid]="hasValidCharacters">
          <mat-icon>{{ hasValidCharacters ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          Caracteres especiales permitidos (._%+*-)
        </li>
      </ul>
   </div>

   <mat-form-field class="wid-100">
      <mat-label>Contraseña</mat-label>
      <mat-icon matPrefix class="prefix-icon">lock</mat-icon>
      <input matInput 
             [type]="hidePassword ? 'password' : 'text'" 
             class="wid-100" 
             placeholder="Ingresa la clave que quieres vincular a tu cuenta." 
             formControlName="password"
             autocomplete="new-password">
      <button matSuffix mat-icon-button (click)="hidePassword = !hidePassword" type="button">
        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
   </mat-form-field>

   <mat-form-field class="wid-100">
      <mat-label>Confirmar contraseña</mat-label>
      <mat-icon matPrefix class="prefix-icon">lock</mat-icon>
      <input matInput 
             [type]="hideConfirmPassword ? 'password' : 'text'" 
             placeholder="Verifica la clave que quieres vincular a tu cuenta." 
             formControlName="confirmPassword"
             autocomplete="new-password">
      <button matSuffix mat-icon-button (click)="hideConfirmPassword = !hideConfirmPassword" type="button">
        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
   </mat-form-field>

   <button mat-flat-button
          [disabled]="!codeForm.valid || isSubmitting"
          (click)="crearUsuario()">
     <span *ngIf="!isSubmitting">Crear usuario</span>
     <span *ngIf="isSubmitting">Creando usuario...</span>
   </button>
</form>
</mat-card>